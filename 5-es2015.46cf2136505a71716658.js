(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"V7z+":function(e,t,n){"use strict";n.r(t),n.d(t,"DetailsModule",(function(){return G}));var i=n("tyNb"),r=n("eIep"),o=n("fXoL"),a=n("alFv"),c=n("ofXK"),s=n("wPw+");let d=(()=>{class e{constructor(e){this.eRef=e}loadFallbackOnError(){const e=this.eRef.nativeElement,t="https://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available";e.src=this.appFallbackimg||`${t}/landscape_xlarge.jpg`,e.srcset=this.appFallbackimages||this.getImageSrcSet(t)}getImageSrcSet(e){return`${e}/landscape_small.jpg 120w, ${e}/landscape_medium.jpg 175w, ${e}/landscape_large.jpg 190w, ${e}/landscape_xlarge.jpg 270w`}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(o.l))},e.\u0275dir=o.Ib({type:e,selectors:[["img","appFallbackimg",""]],hostBindings:function(e,t){1&e&&o.bc("error",(function(){return t.loadFallbackOnError()}))},inputs:{appFallbackimg:"appFallbackimg",appFallbackimages:"appFallbackimages"}}),e})();var l=n("/XKF"),b=n("3ydp"),h=n("xqAn"),g=n("PhVf"),u=n("A3yW"),p=n("R0Ic"),_=n("8LU1"),f=n("FtGj"),m=n("XNiG"),v=n("JX91"),C=n("1G5W"),S=n("pLZG"),k=n("IzEk"),O=n("RNMI"),x=n("3Pt+");const y=["edit"],M=["dt-inline-editor",""];function w(e,t){if(1&e){const e=o.Ub();o.Rb(0),o.Tb(1,"span"),o.Ac(2),o.Sb(),o.Tb(3,"button",1,2),o.bc("click",(function(){return o.sc(e),o.ec().enterEditing()})),o.Ob(5,"dt-icon",3),o.Sb(),o.Qb()}if(2&e){const e=o.ec();o.Cb(2),o.Bc(e.value)}}function P(e,t){1&e&&o.Ob(0,"dt-loading-spinner")}function j(e,t){if(1&e&&(o.Tb(0,"div",14),o.hc(1),o.Sb()),2&e){const e=o.ec(2);o.jc("@transitionErrors",e._errorAnimationState)}}function T(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div"),o.Tb(1,"div",4),o.Tb(2,"div",5),o.Tb(3,"input",6),o.bc("keydown",(function(t){return o.sc(e),o.ec().onKeyDown(t)}))("input",(function(t){return o.sc(e),o.ec()._onInput(t)})),o.Sb(),o.Sb(),o.Tb(4,"div",7),o.Tb(5,"button",8),o.bc("click",(function(){return o.sc(e),o.ec().saveAndQuitEditing()})),o.Ob(6,"dt-icon",9),o.Sb(),o.Tb(7,"button",10),o.bc("click",(function(){return o.sc(e),o.ec().cancelAndQuitEditing()})),o.Ob(8,"dt-icon",11),o.Sb(),o.Sb(),o.Sb(),o.Tb(9,"div",12),o.yc(10,j,2,1,"div",13),o.Sb(),o.Sb()}if(2&e){const e=o.ec();o.Cb(3),o.jc("errorStateMatcher",e.errorStateMatcher)("required",e.required)("disabled",e.saving)("value",e.value),o.Cb(2),o.jc("disabled",e.errorState),o.Db("aria-label",e._ariaLabelSave),o.Cb(2),o.Db("aria-label",e._ariaLabelCancel),o.Cb(3),o.jc("ngIf",e._getDisplayedError())}}const A=[[["dt-error"]]],F=["dt-error"];class I{constructor(e,t,n,i){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}}const L=Object(O.t)(I);let E=(()=>{class e extends L{constructor(e,t,n,i,r,a){super(n,r,a,i),this._changeDetectorRef=e,this._ngZone=t,this.ngControl=i,this.saved=new o.o,this.cancelled=new o.o,this._inputFocused=!1,this._errorAnimationState="",this._onChanged=()=>{},this._onTouched=()=>{},this._mode=0,this._value="",this._required=!1,this._destroy$=new m.a,null!==this.ngControl&&(this.ngControl.valueAccessor=this)}get required(){return this._required}set required(e){this._required=Object(_.b)(e)}get depAriaLabelSave(){return this._ariaLabelSave}set depAriaLabelSave(e){this._ariaLabelSave=e}get ariaLabelSave(){return this._ariaLabelSave}set ariaLabelSave(e){this._ariaLabelSave=e}get depAriaLabelCancel(){return this._ariaLabelCancel}set depAriaLabelCancel(e){this._ariaLabelCancel=e}get ariaLabelCancel(){return this._ariaLabelCancel}set ariaLabelCancel(e){this._ariaLabelCancel=e}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._onChanged(e),this._changeDetectorRef.markForCheck())}get idle(){return 0===this._mode}get editing(){return 1===this._mode}get saving(){return 2===this._mode}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngAfterContentInit(){this._errorChildren.changes.pipe(Object(v.a)(null)).subscribe(()=>{this._errorAnimationState=this._getDisplayedError()&&this._inputFocused?"enter-delayed":"enter",this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._input.changes.pipe(Object(v.a)(null),Object(C.a)(this._destroy$)).subscribe(()=>{const e=this._input.first;e&&(e.ngControl=this.ngControl)}),this._input.changes.pipe(Object(v.a)(null),Object(S.a)(()=>!!this._input.first),Object(r.a)(()=>this._input.first.stateChanges),Object(C.a)(this._destroy$)).subscribe(()=>{this._inputFocused!==this._input.first.focused&&1===this._mode&&(this._inputFocused=this._input.first.focused,this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._saving&&this._saving.unsubscribe(),this._destroy$.next(),this._destroy$.complete()}onKeyDown(e){this._onKeyDown(e)}enterEditing(){this._initialState=this.value,this._mode=1,this._onTouched(),this._focusWhenStable(),this._changeDetectorRef.markForCheck()}saveAndQuitEditing(){if(this.errorState)return;const e=this.value;this.onRemoteSave?(this._mode=2,this._saving=this.onRemoteSave(e).subscribe(()=>{this._emitValue(e)},e=>{this._emitError(e)}),this._changeDetectorRef.markForCheck()):this._emitValue(e)}cancelAndQuitEditing(){const e=this._value;this.value=this._initialState,this._mode=0,this.cancelled.emit(e),this._changeDetectorRef.markForCheck()}writeValue(e){this.value=e,this._changeDetectorRef.markForCheck()}registerOnChange(e){this._onChanged=e}registerOnTouched(e){this._onTouched=e}focus(){1===this._mode&&this._input.length?this._input.first.focus():0===this._mode&&this._editButtonReference&&this._editButtonReference.nativeElement.focus()}_onKeyDown(e){switch(Object(O.j)(e)){case f.d:this.cancelAndQuitEditing();case f.c:this.saveAndQuitEditing()}}_onInput(e){this.writeValue(e.target.value)}_getDisplayedError(){return this._errorChildren&&this._errorChildren.length>0&&this.errorState}_emitValue(e){this._mode=0,this.saved.emit(this.value),this._onChanged(e),this._changeDetectorRef.markForCheck()}_emitError(e){this._mode=1,this.saved.error(e),this._changeDetectorRef.markForCheck()}_focusWhenStable(){this._executeOnStable(()=>{this.focus()})}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.asObservable().pipe(Object(k.a)(1)).subscribe(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(o.h),o.Nb(o.A),o.Nb(O.g),o.Nb(x.f,10),o.Nb(x.i,8),o.Nb(x.b,8))},e.\u0275cmp=o.Hb({type:e,selectors:[["","dt-inline-editor",""]],contentQueries:function(e,t,n){var i;1&e&&o.Gb(n,b.a,!1),2&e&&o.pc(i=o.cc())&&(t._errorChildren=i)},viewQuery:function(e,t){var n;1&e&&(o.Ec(y,!0),o.Ec(g.a,!0)),2&e&&(o.pc(n=o.cc())&&(t._editButtonReference=n.first),o.pc(n=o.cc())&&(t._input=n))},hostAttrs:[1,"dt-inline-editor"],hostVars:4,hostBindings:function(e,t){2&e&&o.Eb("dt-focused",t._inputFocused)("dt-inline-editor-invalid",t.ngControl&&t.ngControl.invalid)},inputs:{required:"required",depAriaLabelSave:["aria-label-save","depAriaLabelSave"],ariaLabelSave:"ariaLabelSave",depAriaLabelCancel:["aria-label-cancel","depAriaLabelCancel"],ariaLabelCancel:"ariaLabelCancel",value:"value",errorStateMatcher:"errorStateMatcher",onRemoteSave:"onRemoteSave"},outputs:{saved:"saved",cancelled:"cancelled"},exportAs:["dt-inline-editor"],features:[o.zb],attrs:M,ngContentSelectors:F,decls:3,vars:3,consts:[[4,"ngIf"],["dt-icon-button","","variant","nested","aria-label","edit",3,"click"],["edit",""],["name","edit1"],[1,"dt-inline-editor-edit-body"],[1,"dt-inline-editor-infix"],["dtInput","",3,"errorStateMatcher","required","disabled","value","keydown","input"],[1,"dt-inline-editor-suffix"],["dt-icon-button","","variant","nested",1,"dt-inline-editor-edit",3,"disabled","click"],["name","checkmark"],["dt-icon-button","","variant","nested",1,"dt-inline-editor-cancel",3,"click"],["name","abort"],[1,"dt-inline-editor-errors-subscript"],["class","dt-inline-editor-errors",4,"ngIf"],[1,"dt-inline-editor-errors"]],template:function(e,t){1&e&&(o.ic(A),o.yc(0,w,6,1,"ng-container",0),o.yc(1,P,1,0,"dt-loading-spinner",0),o.yc(2,T,11,8,"div",0)),2&e&&(o.jc("ngIf",t.idle),o.Cb(1),o.jc("ngIf",t.saving),o.Cb(1),o.jc("ngIf",t.editing||t.saving))},directives:[c.k,l.a,h.a,u.b,g.a],styles:['[_nghost-%COMP%]{display:flex;align-items:center}.dt-focused[_nghost-%COMP%]   .dt-inline-editor-edit-body[_ngcontent-%COMP%]{outline-offset:1px;outline:#b7b7b7 solid 2px}.dt-inline-editor-edit-body[_ngcontent-%COMP%]{display:flex;box-sizing:border-box;width:100%;box-sizing:border-box;border:1px solid #ccc;border-radius:3px;min-height:32px;background-color:#fff;line-height:29px;overflow:visible}.dt-theme-dark[_ngcontent-%COMP%]   .dt-inline-editor-edit-body[_ngcontent-%COMP%]{border-color:#b7b7b7}.dt-inline-editor-infix[_ngcontent-%COMP%]{display:block;position:relative;flex:auto;min-width:0}.dt-inline-editor-infix[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .dt-inline-editor-suffix[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.dt-inline-editor-infix[_ngcontent-%COMP%]   .dt-input[_ngcontent-%COMP%]{border:none;border-radius:none;min-height:30px}.dt-inline-editor-suffix[_ngcontent-%COMP%]{white-space:nowrap;flex:none;position:relative;display:flex;align-items:center}.dt-inline-editor-errors-subscript[_ngcontent-%COMP%]{position:relative}.dt-inline-editor-errors[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;right:0;border:1px solid #ccc;background-color:#f8f8f8;padding:8px 12px;border-bottom-left-radius:3px;border-bottom-right-radius:3px;transform-origin:top left;z-index:1}.dt-inline-editor-errors[_ngcontent-%COMP%]::before{content:"";display:block;position:absolute;top:-2px;left:-1px;right:-1px;height:2px;background-color:#dc172a}.dt-inline-editor-invalid[_ngcontent-%COMP%]   .dt-input[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.dt-inline-editor-errors[_ngcontent-%COMP%]     .dt-error{font-family:BerninaSansWeb,OpenSans,sans-serif;font-weight:400;font-size:12px;line-height:1.6;text-decoration:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:block;box-sizing:border-box;white-space:normal;color:#dc172a}'],data:{animation:[Object(p.l)("transitionErrors",[Object(p.i)("enter",Object(p.j)({opacity:1,transform:"scaleY(1)"})),Object(p.k)("void => enter",[Object(p.m)(O.a)]),Object(p.k)("void => enter-delayed",[Object(p.m)(O.b)])])]},changeDetection:0}),e})(),N=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[c.c,u.a,l.b,g.b,b.d,h.b]]}),e})();function D(e,t){if(1&e&&(o.Tb(0,"p"),o.Ac(1),o.Sb()),2&e){const e=t.$implicit;o.Cb(1),o.Bc(e.name)}}function R(e,t){if(1&e&&(o.Tb(0,"div",4),o.Tb(1,"div",15),o.Tb(2,"div",16),o.Tb(3,"div"),o.Tb(4,"label"),o.Ac(5,"Comic series"),o.Sb(),o.yc(6,D,2,1,"p",17),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e){const e=o.ec(2);o.Cb(6),o.jc("ngForOf",e.getSeriesItems(e.hero))}}function $(e,t){if(1&e&&(o.Tb(0,"p"),o.Ac(1),o.Sb()),2&e){const e=t.$implicit;o.Cb(1),o.Bc(e.name)}}function H(e,t){if(1&e&&(o.Tb(0,"div",4),o.Tb(1,"div",15),o.Tb(2,"div",16),o.Tb(3,"div"),o.Tb(4,"label"),o.Ac(5,"Stories"),o.Sb(),o.yc(6,$,2,1,"p",17),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e){const e=o.ec(2);o.Cb(6),o.jc("ngForOf",e.getStories(e.hero))}}function B(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",1),o.Tb(1,"div",2),o.Tb(2,"h2"),o.Ac(3),o.fc(4,"uppercase"),o.Sb(),o.Tb(5,"div",3),o.Tb(6,"div",4),o.Tb(7,"div",5),o.Ob(8,"img",6),o.Tb(9,"div",7),o.Tb(10,"div",8),o.Tb(11,"label",9),o.Ac(12,"ID"),o.Sb(),o.Tb(13,"p",10),o.Ac(14),o.Sb(),o.Sb(),o.Tb(15,"div",8),o.Tb(16,"label"),o.Ac(17,"Name:"),o.Sb(),o.Tb(18,"span",11),o.Ac(19),o.Sb(),o.Sb(),o.Tb(20,"div",8),o.Tb(21,"label"),o.Ac(22,"Nickname:"),o.Sb(),o.Tb(23,"em",12),o.bc("ngModelChange",(function(t){return o.sc(e),o.ec().hero.nickname=t})),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.yc(24,R,7,1,"div",13),o.yc(25,H,7,1,"div",13),o.Sb(),o.Sb(),o.Tb(26,"button",14),o.bc("click",(function(){return o.sc(e),o.ec().goBack()})),o.Ac(27,"Go back"),o.Sb(),o.Tb(28,"button",14),o.bc("click",(function(){return o.sc(e),o.ec().save()})),o.Ac(29,"Save"),o.Sb(),o.Sb()}if(2&e){const e=o.ec();o.Cb(3),o.Bc(o.gc(4,9,e.hero.name)),o.Cb(5),o.kc("src",e.getImageSrc(),o.tc),o.kc("srcset",e.getImageSrcSet(),o.tc),o.kc("alt",e.hero.name),o.Cb(6),o.Bc(e.hero.id),o.Cb(5),o.Bc(e.hero.name),o.Cb(4),o.jc("ngModel",e.hero.nickname),o.Cb(1),o.jc("ngIf",e.getSeriesItems(e.hero)),o.Cb(1),o.jc("ngIf",e.getStories(e.hero))}}let z=(()=>{class e{constructor(e,t,n,i){this.route=e,this.heroService=t,this.location=n,this.toast=i}ngOnInit(){this.hero||this.getHero()}getHero(){const e=+this.route.snapshot.paramMap.get("id"),t=this.heroService.tryGetHeroes();if(t)return this.hero=JSON.parse(JSON.stringify(t.find(t=>t.id===e))),void this.trySetNickname();this.heroService.getHero(e).subscribe(e=>{this.hero=e,this.trySetNickname()})}trySetNickname(){this.hero&&(this.hero.nickname||(this.hero.nickname=this.hero.name))}goBack(){this.location.back()}save(){this.heroService.getHeroIndex(this.hero.id).pipe(Object(r.a)(e=>this.heroService.updateHero(this.hero,e))).subscribe(()=>this.updateHeroNickname(this.hero))}updateHeroNickname(e){const t=this.heroService.tryGetHeroes().find(t=>t.id===e.id);t?t.nickname!==e.nickname?(t.nickname=e.nickname,this.heroService.onHeroesChanged(),this.toast.create("Your changes have been saved!")):this.toast.create("You have not made any changes!"):this.toast.create("This name cannot be changed!")}getImageSrc(){return`${this.getPathWithHttps()}/landscape_xlarge.jpg`}getImageSrcSet(){const e=this.getPathWithHttps();return`${e}/landscape_small.jpg 120w, ${e}/landscape_medium.jpg 175w, ${e}/landscape_large.jpg 190w, ${e}/landscape_xlarge.jpg 270w`}getPathWithHttps(){return this.hero.thumbnail.path.indexOf("https")>=0?this.hero.thumbnail.path:this.hero.thumbnail.path.replace("http","https")}getSeriesItems(e){return e.series&&e.series.available>0?e.series.items:null}getStories(e){return e.stories&&e.stories.available>0?e.stories.items:null}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(i.a),o.Nb(a.a),o.Nb(c.g),o.Nb(s.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-hero-detail"]],decls:1,vars:1,consts:[["class","details__wrapper",4,"ngIf"],[1,"details__wrapper"],[1,"details"],[1,"details_container"],[1,"info_container"],[1,"info"],["height","200px","appFallbackimg","",3,"src","srcset","alt"],[1,"info_text_container"],[1,"info_row"],[1,"hero_label"],[1,"hero_id"],["aria-label","Name"],["dt-inline-editor","","ariaLabelSave","Save nickname","ariaLabelCancel","Cancel and discard changes",3,"ngModel","ngModelChange"],["class","info_container",4,"ngIf"],["dt-button","",3,"click"],[1,"items"],[1,"items_text_container"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&o.yc(0,B,30,11,"div",0),2&e&&o.jc("ngIf",t.hero)},directives:[c.k,d,E,x.g,x.j,l.a,c.j],pipes:[c.o],styles:["h2[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{display:inline-block;color:#607d8b;font-weight:700}input[_ngcontent-%COMP%]{height:2em;font-size:1em;padding-left:.4em;margin-top:5px}button[_ngcontent-%COMP%]{margin-top:10px;background-color:#eee;border:none;border-radius:4px;cursor:pointer;cursor:hand}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#ccc;cursor:auto}.dt-button[_ngcontent-%COMP%] + .dt-button[_ngcontent-%COMP%]{margin-left:8px}.info_row[_ngcontent-%COMP%]{display:flex;margin:auto;flex-direction:column}@media (min-width:578px){img[_ngcontent-%COMP%]{float:right}}.details__wrapper[_ngcontent-%COMP%]{margin:0 10px}@media (max-width:577px){img[_ngcontent-%COMP%]{display:flex;margin:10px auto auto;box-shadow:2px 2px 2px #d3d3d3}details[_ngcontent-%COMP%]{overflow:hidden}}.details_container[_ngcontent-%COMP%]{box-shadow:0 0 10px rgba(14,30,37,.12)}.info_container[_ngcontent-%COMP%]{display:grid;background-color:#fff}.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{grid-column:1;border:1px solid #e1e1e1}.items[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;border-left:1px solid #e1e1e1;border-right:1px solid #e1e1e1}.hero_id_label[_ngcontent-%COMP%]{font-size:13px;line-height:20px;letter-spacing:1px;text-transform:uppercase;margin:0;padding:0}.hero_id[_ngcontent-%COMP%], .hero_id_label[_ngcontent-%COMP%]{font-family:Roboto,Trebuchet MS,Helvetica,Arial,sans-serif;font-weight:700}.hero_id[_ngcontent-%COMP%]{color:#151515;font-size:16px;word-break:break-word}.hero_label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}.info_text_container[_ngcontent-%COMP%]{padding-left:2em;padding-top:2em}.items_text_container[_ngcontent-%COMP%]{padding:2em}.items_text_container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:10px}em[_ngcontent-%COMP%]{width:90%;margin-bottom:10px}"]}),e})();var q=n("PCNd");let G=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[q.a,x.k,N,i.f.forChild([{path:"",component:z}])]]}),e})()}}]);