(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"V7z+":function(e,t,n){"use strict";n.r(t),n.d(t,"DetailsModule",(function(){return G}));var i=n("tyNb"),r=n("fXoL"),a=n("alFv"),o=n("ofXK"),c=n("wPw+");let s=(()=>{class e{constructor(e){this.eRef=e}loadFallbackOnError(){const e=this.eRef.nativeElement,t="https://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available";e.src=this.appFallbackimg||`${t}/landscape_xlarge.jpg`,e.srcset=this.appFallbackimages||this.getImageSrcSet(t)}getImageSrcSet(e){return`${e}/landscape_small.jpg 120w, ${e}/landscape_medium.jpg 175w, ${e}/landscape_large.jpg 190w, ${e}/landscape_xlarge.jpg 270w`}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(r.l))},e.\u0275dir=r.Ib({type:e,selectors:[["img","appFallbackimg",""]],hostBindings:function(e,t){1&e&&r.bc("error",(function(){return t.loadFallbackOnError()}))},inputs:{appFallbackimg:"appFallbackimg",appFallbackimages:"appFallbackimages"}}),e})();var d=n("/XKF"),l=n("3ydp"),b=n("xqAn"),h=n("PhVf"),g=n("A3yW"),u=n("R0Ic"),p=n("8LU1"),_=n("FtGj"),f=n("XNiG"),m=n("JX91"),v=n("1G5W"),C=n("pLZG"),S=n("eIep"),k=n("IzEk"),O=n("RNMI"),x=n("3Pt+");const y=["edit"],M=["dt-inline-editor",""];function w(e,t){if(1&e){const e=r.Ub();r.Rb(0),r.Tb(1,"span"),r.Ac(2),r.Sb(),r.Tb(3,"button",1,2),r.bc("click",(function(){return r.sc(e),r.ec().enterEditing()})),r.Ob(5,"dt-icon",3),r.Sb(),r.Qb()}if(2&e){const e=r.ec();r.Cb(2),r.Bc(e.value)}}function P(e,t){1&e&&r.Ob(0,"dt-loading-spinner")}function j(e,t){if(1&e&&(r.Tb(0,"div",14),r.hc(1),r.Sb()),2&e){const e=r.ec(2);r.jc("@transitionErrors",e._errorAnimationState)}}function T(e,t){if(1&e){const e=r.Ub();r.Tb(0,"div"),r.Tb(1,"div",4),r.Tb(2,"div",5),r.Tb(3,"input",6),r.bc("keydown",(function(t){return r.sc(e),r.ec().onKeyDown(t)}))("input",(function(t){return r.sc(e),r.ec()._onInput(t)})),r.Sb(),r.Sb(),r.Tb(4,"div",7),r.Tb(5,"button",8),r.bc("click",(function(){return r.sc(e),r.ec().saveAndQuitEditing()})),r.Ob(6,"dt-icon",9),r.Sb(),r.Tb(7,"button",10),r.bc("click",(function(){return r.sc(e),r.ec().cancelAndQuitEditing()})),r.Ob(8,"dt-icon",11),r.Sb(),r.Sb(),r.Sb(),r.Tb(9,"div",12),r.yc(10,j,2,1,"div",13),r.Sb(),r.Sb()}if(2&e){const e=r.ec();r.Cb(3),r.jc("errorStateMatcher",e.errorStateMatcher)("required",e.required)("disabled",e.saving)("value",e.value),r.Cb(2),r.jc("disabled",e.errorState),r.Db("aria-label",e._ariaLabelSave),r.Cb(2),r.Db("aria-label",e._ariaLabelCancel),r.Cb(3),r.jc("ngIf",e._getDisplayedError())}}const A=[[["dt-error"]]],F=["dt-error"];class L{constructor(e,t,n,i){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}}const I=Object(O.t)(L);let N=(()=>{class e extends I{constructor(e,t,n,i,a,o){super(n,a,o,i),this._changeDetectorRef=e,this._ngZone=t,this.ngControl=i,this.saved=new r.o,this.cancelled=new r.o,this._inputFocused=!1,this._errorAnimationState="",this._onChanged=()=>{},this._onTouched=()=>{},this._mode=0,this._value="",this._required=!1,this._destroy$=new f.a,null!==this.ngControl&&(this.ngControl.valueAccessor=this)}get required(){return this._required}set required(e){this._required=Object(p.b)(e)}get depAriaLabelSave(){return this._ariaLabelSave}set depAriaLabelSave(e){this._ariaLabelSave=e}get ariaLabelSave(){return this._ariaLabelSave}set ariaLabelSave(e){this._ariaLabelSave=e}get depAriaLabelCancel(){return this._ariaLabelCancel}set depAriaLabelCancel(e){this._ariaLabelCancel=e}get ariaLabelCancel(){return this._ariaLabelCancel}set ariaLabelCancel(e){this._ariaLabelCancel=e}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._onChanged(e),this._changeDetectorRef.markForCheck())}get idle(){return 0===this._mode}get editing(){return 1===this._mode}get saving(){return 2===this._mode}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngAfterContentInit(){this._errorChildren.changes.pipe(Object(m.a)(null)).subscribe(()=>{this._errorAnimationState=this._getDisplayedError()&&this._inputFocused?"enter-delayed":"enter",this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._input.changes.pipe(Object(m.a)(null),Object(v.a)(this._destroy$)).subscribe(()=>{const e=this._input.first;e&&(e.ngControl=this.ngControl)}),this._input.changes.pipe(Object(m.a)(null),Object(C.a)(()=>!!this._input.first),Object(S.a)(()=>this._input.first.stateChanges),Object(v.a)(this._destroy$)).subscribe(()=>{this._inputFocused!==this._input.first.focused&&1===this._mode&&(this._inputFocused=this._input.first.focused,this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._saving&&this._saving.unsubscribe(),this._destroy$.next(),this._destroy$.complete()}onKeyDown(e){this._onKeyDown(e)}enterEditing(){this._initialState=this.value,this._mode=1,this._onTouched(),this._focusWhenStable(),this._changeDetectorRef.markForCheck()}saveAndQuitEditing(){if(this.errorState)return;const e=this.value;this.onRemoteSave?(this._mode=2,this._saving=this.onRemoteSave(e).subscribe(()=>{this._emitValue(e)},e=>{this._emitError(e)}),this._changeDetectorRef.markForCheck()):this._emitValue(e)}cancelAndQuitEditing(){const e=this._value;this.value=this._initialState,this._mode=0,this.cancelled.emit(e),this._changeDetectorRef.markForCheck()}writeValue(e){this.value=e,this._changeDetectorRef.markForCheck()}registerOnChange(e){this._onChanged=e}registerOnTouched(e){this._onTouched=e}focus(){1===this._mode&&this._input.length?this._input.first.focus():0===this._mode&&this._editButtonReference&&this._editButtonReference.nativeElement.focus()}_onKeyDown(e){switch(Object(O.j)(e)){case _.d:this.cancelAndQuitEditing();case _.c:this.saveAndQuitEditing()}}_onInput(e){this.writeValue(e.target.value)}_getDisplayedError(){return this._errorChildren&&this._errorChildren.length>0&&this.errorState}_emitValue(e){this._mode=0,this.saved.emit(this.value),this._onChanged(e),this._changeDetectorRef.markForCheck()}_emitError(e){this._mode=1,this.saved.error(e),this._changeDetectorRef.markForCheck()}_focusWhenStable(){this._executeOnStable(()=>{this.focus()})}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.asObservable().pipe(Object(k.a)(1)).subscribe(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(r.h),r.Nb(r.A),r.Nb(O.g),r.Nb(x.f,10),r.Nb(x.i,8),r.Nb(x.b,8))},e.\u0275cmp=r.Hb({type:e,selectors:[["","dt-inline-editor",""]],contentQueries:function(e,t,n){var i;1&e&&r.Gb(n,l.a,!1),2&e&&r.pc(i=r.cc())&&(t._errorChildren=i)},viewQuery:function(e,t){var n;1&e&&(r.Ec(y,!0),r.Ec(h.a,!0)),2&e&&(r.pc(n=r.cc())&&(t._editButtonReference=n.first),r.pc(n=r.cc())&&(t._input=n))},hostAttrs:[1,"dt-inline-editor"],hostVars:4,hostBindings:function(e,t){2&e&&r.Eb("dt-focused",t._inputFocused)("dt-inline-editor-invalid",t.ngControl&&t.ngControl.invalid)},inputs:{required:"required",depAriaLabelSave:["aria-label-save","depAriaLabelSave"],ariaLabelSave:"ariaLabelSave",depAriaLabelCancel:["aria-label-cancel","depAriaLabelCancel"],ariaLabelCancel:"ariaLabelCancel",value:"value",errorStateMatcher:"errorStateMatcher",onRemoteSave:"onRemoteSave"},outputs:{saved:"saved",cancelled:"cancelled"},exportAs:["dt-inline-editor"],features:[r.zb],attrs:M,ngContentSelectors:F,decls:3,vars:3,consts:[[4,"ngIf"],["dt-icon-button","","variant","nested","aria-label","edit",3,"click"],["edit",""],["name","edit1"],[1,"dt-inline-editor-edit-body"],[1,"dt-inline-editor-infix"],["dtInput","",3,"errorStateMatcher","required","disabled","value","keydown","input"],[1,"dt-inline-editor-suffix"],["dt-icon-button","","variant","nested",1,"dt-inline-editor-edit",3,"disabled","click"],["name","checkmark"],["dt-icon-button","","variant","nested",1,"dt-inline-editor-cancel",3,"click"],["name","abort"],[1,"dt-inline-editor-errors-subscript"],["class","dt-inline-editor-errors",4,"ngIf"],[1,"dt-inline-editor-errors"]],template:function(e,t){1&e&&(r.ic(A),r.yc(0,w,6,1,"ng-container",0),r.yc(1,P,1,0,"dt-loading-spinner",0),r.yc(2,T,11,8,"div",0)),2&e&&(r.jc("ngIf",t.idle),r.Cb(1),r.jc("ngIf",t.saving),r.Cb(1),r.jc("ngIf",t.editing||t.saving))},directives:[o.k,d.a,b.a,g.b,h.a],styles:['[_nghost-%COMP%]{display:flex;align-items:center}.dt-focused[_nghost-%COMP%]   .dt-inline-editor-edit-body[_ngcontent-%COMP%]{outline-offset:1px;outline:#b7b7b7 solid 2px}.dt-inline-editor-edit-body[_ngcontent-%COMP%]{display:flex;box-sizing:border-box;width:100%;box-sizing:border-box;border:1px solid #ccc;border-radius:3px;min-height:32px;background-color:#fff;line-height:29px;overflow:visible}.dt-theme-dark[_ngcontent-%COMP%]   .dt-inline-editor-edit-body[_ngcontent-%COMP%]{border-color:#b7b7b7}.dt-inline-editor-infix[_ngcontent-%COMP%]{display:block;position:relative;flex:auto;min-width:0}.dt-inline-editor-infix[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .dt-inline-editor-suffix[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.dt-inline-editor-infix[_ngcontent-%COMP%]   .dt-input[_ngcontent-%COMP%]{border:none;border-radius:none;min-height:30px}.dt-inline-editor-suffix[_ngcontent-%COMP%]{white-space:nowrap;flex:none;position:relative;display:flex;align-items:center}.dt-inline-editor-errors-subscript[_ngcontent-%COMP%]{position:relative}.dt-inline-editor-errors[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;right:0;border:1px solid #ccc;background-color:#f8f8f8;padding:8px 12px;border-bottom-left-radius:3px;border-bottom-right-radius:3px;transform-origin:top left;z-index:1}.dt-inline-editor-errors[_ngcontent-%COMP%]::before{content:"";display:block;position:absolute;top:-2px;left:-1px;right:-1px;height:2px;background-color:#dc172a}.dt-inline-editor-invalid[_ngcontent-%COMP%]   .dt-input[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.dt-inline-editor-errors[_ngcontent-%COMP%]     .dt-error{font-family:BerninaSansWeb,OpenSans,sans-serif;font-weight:400;font-size:12px;line-height:1.6;text-decoration:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:block;box-sizing:border-box;white-space:normal;color:#dc172a}'],data:{animation:[Object(u.l)("transitionErrors",[Object(u.i)("enter",Object(u.j)({opacity:1,transform:"scaleY(1)"})),Object(u.k)("void => enter",[Object(u.m)(O.a)]),Object(u.k)("void => enter-delayed",[Object(u.m)(O.b)])])]},changeDetection:0}),e})(),E=(()=>{class e{}return e.\u0275mod=r.Lb({type:e}),e.\u0275inj=r.Kb({factory:function(t){return new(t||e)},imports:[[o.c,g.a,d.b,h.b,l.d,b.b]]}),e})();function D(e,t){if(1&e&&(r.Tb(0,"p"),r.Ac(1),r.Sb()),2&e){const e=t.$implicit;r.Cb(1),r.Bc(e.name)}}function R(e,t){if(1&e&&(r.Tb(0,"div",4),r.Tb(1,"div",15),r.Tb(2,"div",16),r.Tb(3,"div"),r.Tb(4,"label"),r.Ac(5,"Comic series"),r.Sb(),r.yc(6,D,2,1,"p",17),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&e){const e=r.ec(2);r.Cb(6),r.jc("ngForOf",e.getSeriesItems(e.hero))}}function H(e,t){if(1&e&&(r.Tb(0,"p"),r.Ac(1),r.Sb()),2&e){const e=t.$implicit;r.Cb(1),r.Bc(e.name)}}function $(e,t){if(1&e&&(r.Tb(0,"div",4),r.Tb(1,"div",15),r.Tb(2,"div",16),r.Tb(3,"div"),r.Tb(4,"label"),r.Ac(5,"Stories"),r.Sb(),r.yc(6,H,2,1,"p",17),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&e){const e=r.ec(2);r.Cb(6),r.jc("ngForOf",e.getStories(e.hero))}}function B(e,t){if(1&e){const e=r.Ub();r.Tb(0,"div",1),r.Tb(1,"div",2),r.Tb(2,"h2"),r.Ac(3),r.fc(4,"uppercase"),r.Sb(),r.Tb(5,"div",3),r.Tb(6,"div",4),r.Tb(7,"div",5),r.Ob(8,"img",6),r.Tb(9,"div",7),r.Tb(10,"div",8),r.Tb(11,"label",9),r.Ac(12,"ID"),r.Sb(),r.Tb(13,"p",10),r.Ac(14),r.Sb(),r.Sb(),r.Tb(15,"div",8),r.Tb(16,"label"),r.Ac(17,"Name:"),r.Sb(),r.Tb(18,"span",11),r.Ac(19),r.Sb(),r.Sb(),r.Tb(20,"div",8),r.Tb(21,"label"),r.Ac(22,"Nickname:"),r.Sb(),r.Tb(23,"em",12),r.bc("ngModelChange",(function(t){return r.sc(e),r.ec().hero.nickname=t})),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.yc(24,R,7,1,"div",13),r.yc(25,$,7,1,"div",13),r.Sb(),r.Sb(),r.Tb(26,"button",14),r.bc("click",(function(){return r.sc(e),r.ec().goBack()})),r.Ac(27,"Go back"),r.Sb(),r.Tb(28,"button",14),r.bc("click",(function(){return r.sc(e),r.ec().save()})),r.Ac(29,"Save"),r.Sb(),r.Sb()}if(2&e){const e=r.ec();r.Cb(3),r.Bc(r.gc(4,9,e.hero.name)),r.Cb(5),r.kc("src",e.getImageSrc(),r.tc),r.kc("srcset",e.getImageSrcSet(),r.tc),r.kc("alt",e.hero.name),r.Cb(6),r.Bc(e.hero.id),r.Cb(5),r.Bc(e.hero.name),r.Cb(4),r.jc("ngModel",e.hero.nickname),r.Cb(1),r.jc("ngIf",e.getSeriesItems(e.hero)),r.Cb(1),r.jc("ngIf",e.getStories(e.hero))}}let z=(()=>{class e{constructor(e,t,n,i){this.route=e,this.heroService=t,this.location=n,this.toast=i}ngOnInit(){this.hero||this.getHero()}getHero(){const e=+this.route.snapshot.paramMap.get("id"),t=this.heroService.tryGetHeroes();if(t)return this.hero=JSON.parse(JSON.stringify(t.find(t=>t.id===e))),void this.trySetNickname();this.heroService.getHero(e).subscribe(e=>{this.hero=e,this.trySetNickname()})}trySetNickname(){this.hero&&(this.hero.nickname||(this.hero.nickname=this.hero.name))}goBack(){this.location.back()}save(){this.heroService.updateHero(this.hero).subscribe(()=>this.updateHeroName(this.hero))}updateHeroName(e){const t=this.heroService.tryGetHeroes();t?this.updateHeroNickname(e,t):this.heroService.getHeroes().subscribe(t=>{this.updateHeroNickname(e,t)})}updateHeroNickname(e,t){const n=t.find(t=>t.id===e.id);n?n.nickname!==e.nickname?(n.nickname=e.nickname,this.heroService.onHeroesChanged(),this.toast.create("Your changes have been saved!")):this.toast.create("You have not made any changes!"):this.toast.create("This name cannot be changed!")}getImageSrc(){return`${this.getPathWithHttps()}/landscape_xlarge.jpg`}getImageSrcSet(){const e=this.getPathWithHttps();return`${e}/landscape_small.jpg 120w, ${e}/landscape_medium.jpg 175w, ${e}/landscape_large.jpg 190w, ${e}/landscape_xlarge.jpg 270w`}getPathWithHttps(){return this.hero.thumbnail.path.indexOf("https")>=0?this.hero.thumbnail.path:this.hero.thumbnail.path.replace("http","https")}getSeriesItems(e){return e.series&&e.series.available>0?e.series.items:null}getStories(e){return e.stories&&e.stories.available>0?e.stories.items:null}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(i.a),r.Nb(a.a),r.Nb(o.g),r.Nb(c.a))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-hero-detail"]],decls:1,vars:1,consts:[["class","details__wrapper",4,"ngIf"],[1,"details__wrapper"],[1,"details"],[1,"details_container"],[1,"info_container"],[1,"info"],["height","200px","appFallbackimg","",3,"src","srcset","alt"],[1,"info_text_container"],[1,"info_row"],[1,"hero_label"],[1,"hero_id"],["aria-label","Name"],["dt-inline-editor","","ariaLabelSave","Save nickname","ariaLabelCancel","Cancel and discard changes",3,"ngModel","ngModelChange"],["class","info_container",4,"ngIf"],["dt-button","",3,"click"],[1,"items"],[1,"items_text_container"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&r.yc(0,B,30,11,"div",0),2&e&&r.jc("ngIf",t.hero)},directives:[o.k,s,N,x.g,x.j,d.a,o.j],pipes:[o.o],styles:["h2[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{display:inline-block;color:#607d8b;font-weight:700}input[_ngcontent-%COMP%]{height:2em;font-size:1em;padding-left:.4em;margin-top:5px}button[_ngcontent-%COMP%]{margin-top:10px;background-color:#eee;border:none;border-radius:4px;cursor:pointer;cursor:hand}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#ccc;cursor:auto}.dt-button[_ngcontent-%COMP%] + .dt-button[_ngcontent-%COMP%]{margin-left:8px}.info_row[_ngcontent-%COMP%]{display:flex;margin:auto;flex-direction:column}@media (min-width:578px){img[_ngcontent-%COMP%]{float:right}}.details__wrapper[_ngcontent-%COMP%]{margin:0 10px}@media (max-width:577px){img[_ngcontent-%COMP%]{display:flex;margin:10px auto auto;box-shadow:2px 2px 2px #d3d3d3}details[_ngcontent-%COMP%]{overflow:hidden}}.details_container[_ngcontent-%COMP%]{box-shadow:0 0 10px rgba(14,30,37,.12)}.info_container[_ngcontent-%COMP%]{display:grid;background-color:#fff}.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{grid-column:1;border:1px solid #e1e1e1}.items[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;border-left:1px solid #e1e1e1;border-right:1px solid #e1e1e1}.hero_id_label[_ngcontent-%COMP%]{font-size:13px;line-height:20px;letter-spacing:1px;text-transform:uppercase;margin:0;padding:0}.hero_id[_ngcontent-%COMP%], .hero_id_label[_ngcontent-%COMP%]{font-family:Roboto,Trebuchet MS,Helvetica,Arial,sans-serif;font-weight:700}.hero_id[_ngcontent-%COMP%]{color:#151515;font-size:16px;word-break:break-word}.hero_label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}.info_text_container[_ngcontent-%COMP%]{padding-left:2em;padding-top:2em}.items_text_container[_ngcontent-%COMP%]{padding:2em}.items_text_container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:10px}em[_ngcontent-%COMP%]{width:90%;margin-bottom:10px}"]}),e})();var q=n("PCNd");let G=(()=>{class e{}return e.\u0275mod=r.Lb({type:e}),e.\u0275inj=r.Kb({factory:function(t){return new(t||e)},imports:[[q.a,x.k,E,i.f.forChild([{path:"",component:z}])]]}),e})()}}]);